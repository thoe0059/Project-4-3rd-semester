<!DOCTYPE HTML>

<html>
	<style>
      .img-shit {
        text-align: center;
        display: block;
      }

    </style>

	<head>
		<title>Sssmart Home - Add Animal</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="C:\Users\barca\Documents\GitHub\Project-4-3rd-semester\Sssmart Home Local\css\main.css">
	</head>
	<body onload="init()">

		<!-- Header -->


			<header id="header">
				<div class="logo"><a href="index.html">Main Page</a></div>
				<a href="animals.html">Choose Animal</a>
			</header>

		<!-- Banner -->
			<section class="banner full">
				<article>
					<img src="black.jpg" alt="" />
					<div class="inner">
						<header>
							<h3><b>Add your animal</b></h3>
							<form id="form" method="GET" action="customanimal.html"><br>
								Species: <input type="text" name="species" id="species">
								Temperature(low, °C): <input type="text" name="templow" id="templow"> 
								Temperature(high, °C): <input type="text" name="temphigh" id="temphigh">
								Humidity(low, %): <input type="text" name="humlow" id="humlow"> 
								Humidity(high, %): <input type="text" name="humhigh" id="humhigh"><br>
								<input type="button" value="Submit" onclick="submitForm();">
								
								</form>
								<script>
								function submitForm(){
									publish(document.getElementById("species").value, 'snektopic/species',2)
									publish(document.getElementById("templow").value, 'snektopic/templow',2)
									publish(document.getElementById("temphigh").value, 'snektopic/temphigh',2)
									publish(document.getElementById("humlow").value, 'snektopic/humlow',2)
									publish(document.getElementById("humhigh").value, 'snektopic/humhigh',2)
									//store the inputted data locally so they can be transfered to another page
									if(typeof(localStorage) != "undefined"){
										localStorage.species = document.getElementById("species").value;
										localStorage.templow = document.getElementById("templow").value;
										localStorage.temphigh = document.getElementById("temphigh").value;
										localStorage.humlow = document.getElementById("humlow").value;
										localStorage.humhigh = document.getElementById("humhigh").value;

									}
									document.getElementById("form").submit();
								}
								</script>
						</header>
					</div>
				</article>
			</section>



		<!-- Scripts -->
		<script type="text/javascript" src="C:\Users\barca\Desktop\Sssmart Home Local\js\jquery.min.js"></script>
		<script type="text/javascript" src="C:\Users\barca\Desktop\Sssmart Home Local\js\jquery.scrollex.min.js"></script>
		<script type="text/javascript" src="C:\Users\barca\Desktop\Sssmart Home Local\js\skel.min.js"></script>
		<script type="text/javascript" src="C:\Users\barca\Desktop\Sssmart Home Local\js\util.js"></script>
		<script type="text/javascript" src="C:\Users\barca\Desktop\Sssmart Home Local\js\main.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://www.hivemq.com/demos/websocket-client/js/mqttws31.js" ></script>
		<script type="text/javascript">

		//Create a new Client object with your broker's hostname, port and your own clientId
		var client = new Messaging.Client("broker.mqttdashboard.com", 8000, "clientId-9HL7JvIJNb");
		var publish = function (payload, topic, qos) {
				//Send your message (also possible to serialize it as JSON or protobuf or just use a string, no limitations)
				var message = new Messaging.Message(payload);
				message.destinationName = "snektopic/1";
				message.qos = qos;
				client.send(message);
		}

		var options = {

		     //connection attempt timeout in seconds
		     timeout: 3,

		     //Gets Called if the connection has successfully been established
		     onSuccess: function () {
		         alert("Connected");
		     },

		     //Gets Called if the connection could not be established
		     onFailure: function (message) {
		         alert("Connection failed: " + message.errorMessage);
		     }

		 };

		//Attempt to connect
		client.connect(options);

		</script>


	</body>
</html>
